<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <data>
        <import type="android.view.View"/>
        <variable
            name="viewModel"
            type="com.sotirisapak.apps.pokemonexplorer.views.home.HomeViewModel" />
    </data>

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".views.home.HomeFragment"
        android:background="?android:attr/colorBackground">

        <!--
            Will use 4 different layouts...
            1. The header layout to preview some headers like (home title)
            2. The categories (types) layout to show the available types to filter
            3. The container layout to preview the recyclerView
            4. An error layout to show the error message
         -->

        <!--
            Misc component...Show the home icon at the top right corner to show
            the edge to edge feature
        -->
        <ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:src="@drawable/icon_home_filled"
            app:tint="?colorPrimary"
            android:alpha="0.1"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:rotation="30"
            android:layout_marginStart="-10dp"
            android:importantForAccessibility="no"/>

        <!-- Region Header layout -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/layoutHeader"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:layout_constraintTop_toTopOf="parent">

            <!-- Assign the header text -->
            <com.google.android.material.textview.MaterialTextView
                style="@style/TextView.Header"
                android:id="@+id/textHeader"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/menu_title_home"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                android:layout_marginVertical="20dp"/>

            <!-- Button to open the favourites tab -->
            <com.google.android.material.button.MaterialButton
                android:id="@+id/buttonFavorites"
                style="@style/Widget.Material3.Button.IconButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                app:icon="@drawable/icon_favorite_filled"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                android:layout_marginEnd="20dp"
                android:layout_marginBottom="5dp"/>

        </androidx.constraintlayout.widget.ConstraintLayout>
        <!-- End Header layout -->

        <!-- Region Container layout -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/layoutCategories"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            app:layout_constraintTop_toBottomOf="@+id/layoutHeader"
            app:layout_constraintBottom_toBottomOf="parent">

            <!-- A recycler view to preview the categories (types) -->
            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/recyclerViewItems"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                app:layout_constraintTop_toTopOf="parent"
                android:clipToPadding="false"
                android:paddingStart="20dp"
                android:paddingEnd="15dp"
                tools:listitem="@layout/rv_item_type"
                tools:itemCount="10"
                android:adapter="@{viewModel.adapters.typeAdapter}"/>

            <!-- A scrollView for nested recycler view placement -->
            <androidx.core.widget.NestedScrollView
                android:id="@+id/nestedScrollViewContent"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                app:layout_constraintTop_toBottomOf="@id/recyclerViewItems"
                app:layout_constraintBottom_toBottomOf="parent">

                <!-- Linear layout for vertical placement -->
                <LinearLayout
                    android:id="@+id/layoutContainerLinear"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical">

                    <androidx.recyclerview.widget.RecyclerView
                        android:layout_width="match_parent"
                        android:layout_height="0dp"
                        android:nestedScrollingEnabled="false"
                        android:layout_weight="1"
                        tools:listitem="@layout/rv_item_pokemon"
                        android:adapter="@{viewModel.adapters.pokemonAdapter}"
                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"/>

                    <!-- The progress indicator -->
                    <com.google.android.material.progressindicator.CircularProgressIndicator
                        android:id="@+id/progressIndicatorContent"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:indeterminate="true"
                        app:trackThickness="2dp"
                        app:trackCornerRadius="2dp"
                        android:layout_gravity="center"
                        android:visibility="@{viewModel.properties.progress ? View.VISIBLE : View.INVISIBLE}"/>

                </LinearLayout>

            </androidx.core.widget.NestedScrollView>

        </androidx.constraintlayout.widget.ConstraintLayout>
        <!-- End Container layout -->

        <!-- Region Error state -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/layoutErrorState"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="?colorErrorContainer"
            android:visibility="@{viewModel.properties.error.length() > 0? View.VISIBLE : View.GONE}">

            <!-- Layout to center the items vertically -->
            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toBottomOf="parent">

                <ImageView
                    android:id="@+id/iconError"
                    android:layout_width="80dp"
                    android:layout_height="80dp"
                    android:importantForAccessibility="no"
                    android:rotation="-30"
                    android:src="@drawable/icon_sad_face"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:tint="?colorError" />

                <!-- Header text -->
                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/materialTextView"
                    style="@style/TextView.Header"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Error"
                    android:textColor="?colorOnErrorContainer"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/iconError" />

                <!-- Error message text -->
                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/materialTextView2"
                    style="@style/TextView.Body"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="@{viewModel.properties.error}"
                    android:textColor="?colorOnErrorContainer"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/materialTextView" />

                <!-- Button to refresh -->
                <com.google.android.material.button.MaterialButton
                    android:id="@+id/buttonErrorRefresh"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/materialTextView2"
                    android:layout_marginTop="20dp"
                    app:backgroundTint="?colorError"
                    android:textColor="?colorOnError"
                    app:iconTint="?colorOnError"
                    android:text="Refresh"
                    android:fontFamily="@font/font_medium"
                    app:icon="@drawable/icon_refresh"/>

            </androidx.constraintlayout.widget.ConstraintLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>
        <!-- End Error state -->

    </androidx.constraintlayout.widget.ConstraintLayout>

</layout>